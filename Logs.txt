2023-11-16T17:52:05.760+02:00  INFO 20928 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2023-11-16T17:52:05.770+02:00  INFO 20928 --- [           main] c.e.d.SecurityContextIssueApplication    : Started SecurityContextIssueApplication in 2.39 seconds (process running for 2.611)
2023-11-16T17:52:09.422+02:00  INFO 20928 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-11-16T17:52:09.422+02:00  INFO 20928 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-11-16T17:52:09.422+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.multipart.support.StandardServletMultipartResolver@5c6fd489
2023-11-16T17:52:09.422+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver@3fc9b206
2023-11-16T17:52:09.422+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.theme.FixedThemeResolver@e5c6e6b
2023-11-16T17:52:09.422+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected DefaultRequestToViewNameTranslator
2023-11-16T17:52:09.422+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected SessionFlashMapManager
2023-11-16T17:52:09.422+02:00 DEBUG 20928 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2023-11-16T17:52:09.422+02:00  INFO 20928 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2023-11-16T17:52:09.429+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@77524ca7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11df2829, org.springframework.security.web.context.SecurityContextHolderFilter@c412556, org.springframework.security.web.header.HeaderWriterFilter@19827608, org.springframework.security.web.authentication.logout.LogoutFilter@525647f3, com.example.demo.security.MockAuthorizationFilter@18e4674d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@450f0235, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7d2c9361, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@f245bdd, org.springframework.security.web.access.ExceptionTranslationFilter@19f02280, org.springframework.security.web.access.intercept.AuthorizationFilter@43a4a9e5]] (1/1)
2023-11-16T17:52:09.429+02:00 DEBUG 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /graphql
2023-11-16T17:52:09.430+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2023-11-16T17:52:09.430+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2023-11-16T17:52:09.432+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2023-11-16T17:52:09.433+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2023-11-16T17:52:09.434+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2023-11-16T17:52:09.434+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2023-11-16T17:52:09.434+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking MockAuthorizationFilter (6/11)
2023-11-16T17:52:09.435+02:00 TRACE 20928 --- [nio-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2023-11-16T17:52:09.435+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2023-11-16T17:52:09.435+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2023-11-16T17:52:09.435+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2023-11-16T17:52:09.435+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2023-11-16T17:52:09.436+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2023-11-16T17:52:09.436+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2023-11-16T17:52:09.436+02:00 TRACE 20928 --- [nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@343ad840]
2023-11-16T17:52:09.447+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Method "[GET]" does not match against value "POST"
2023-11-16T17:52:09.448+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Method "[POST]" matches against value "POST"
2023-11-16T17:52:09.448+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Pattern "/graphql" matches against value "/graphql"
2023-11-16T17:52:09.449+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Content-Type "[application/json]" matches against value "application/json;charset=UTF-8"
2023-11-16T17:52:09.450+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Accept "[application/graphql+json, application/graphql-response+json, application/json]" matches against value "[application/json]"
2023-11-16T17:52:09.450+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.servlet.function.RouterFunctions   : Predicate "((POST && /graphql) && (Content-Type: application/json && Accept: [application/graphql+json, application/graphql-response+json, application/json]))" matches against "HTTP POST /graphql"
2023-11-16T17:52:09.456+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.f.support.RouterFunctionMapping  : Mapped to org.springframework.boot.autoconfigure.graphql.servlet.GraphQlWebMvcAutoConfiguration$$Lambda$1042/0x00000260304aac10@42297bdf
2023-11-16T17:52:09.458+02:00 TRACE 20928 --- [nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@343ad840] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@1d5d6c9a
2023-11-16T17:52:09.459+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated PreAuthenticatedAuthenticationToken [Principal=java.lang.Object@7b572f69, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]
2023-11-16T17:52:09.459+02:00 DEBUG 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /graphql
2023-11-16T17:52:09.462+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/graphql", parameters={}, headers={masked} in DispatcherServlet 'dispatcherServlet'
2023-11-16T17:52:09.465+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Method "[GET]" does not match against value "POST"
2023-11-16T17:52:09.465+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Method "[POST]" matches against value "POST"
2023-11-16T17:52:09.465+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Pattern "/graphql" matches against value "/graphql"
2023-11-16T17:52:09.466+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Content-Type "[application/json]" matches against value "application/json;charset=UTF-8"
2023-11-16T17:52:09.466+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Accept "[application/graphql+json, application/graphql-response+json, application/json]" matches against value "[application/json]"
2023-11-16T17:52:09.466+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.servlet.function.RouterFunctions   : Predicate "((POST && /graphql) && (Content-Type: application/json && Accept: [application/graphql+json, application/graphql-response+json, application/json]))" matches against "HTTP POST /graphql"
2023-11-16T17:52:09.466+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.f.support.RouterFunctionMapping  : Mapped to org.springframework.boot.autoconfigure.graphql.servlet.GraphQlWebMvcAutoConfiguration$$Lambda$1042/0x00000260304aac10@42297bdf
2023-11-16T17:52:09.583+02:00 DEBUG 20928 --- [nio-8080-exec-1] o.s.w.c.request.async.WebAsyncManager    : Started async request
2023-11-16T17:52:09.584+02:00 DEBUG 20928 --- [nio-8080-exec-1] o.s.w.c.request.async.WebAsyncManager    : Async result set, dispatch to /graphql
2023-11-16T17:52:09.586+02:00 DEBUG 20928 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting but response remains open for further handling
2023-11-16T17:52:09.586+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2023-11-16T17:52:09.588+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@77524ca7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11df2829, org.springframework.security.web.context.SecurityContextHolderFilter@c412556, org.springframework.security.web.header.HeaderWriterFilter@19827608, org.springframework.security.web.authentication.logout.LogoutFilter@525647f3, com.example.demo.security.MockAuthorizationFilter@18e4674d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@450f0235, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7d2c9361, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@f245bdd, org.springframework.security.web.access.ExceptionTranslationFilter@19f02280, org.springframework.security.web.access.intercept.AuthorizationFilter@43a4a9e5]] (1/1)
2023-11-16T17:52:09.588+02:00 DEBUG 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /graphql
2023-11-16T17:52:09.588+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2023-11-16T17:52:09.588+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2023-11-16T17:52:09.588+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2023-11-16T17:52:09.588+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2023-11-16T17:52:09.588+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2023-11-16T17:52:09.588+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2023-11-16T17:52:09.588+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking MockAuthorizationFilter (6/11)
2023-11-16T17:52:09.588+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2023-11-16T17:52:09.588+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2023-11-16T17:52:09.588+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2023-11-16T17:52:09.588+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2023-11-16T17:52:09.589+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2023-11-16T17:52:09.589+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2023-11-16T17:52:09.589+02:00 TRACE 20928 --- [nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@343ad840]]]
2023-11-16T17:52:09.590+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Method "[GET]" does not match against value "POST"
2023-11-16T17:52:09.590+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Method "[POST]" matches against value "POST"
2023-11-16T17:52:09.590+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Pattern "/graphql" matches against value "/graphql"
2023-11-16T17:52:09.590+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Content-Type "[application/json]" matches against value "application/json;charset=UTF-8"
2023-11-16T17:52:09.590+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.function.RequestPredicates       : Accept "[application/graphql+json, application/graphql-response+json, application/json]" matches against value "[application/json]"
2023-11-16T17:52:09.590+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.servlet.function.RouterFunctions   : Predicate "((POST && /graphql) && (Content-Type: application/json && Accept: [application/graphql+json, application/graphql-response+json, application/json]))" matches against "HTTP POST /graphql"
2023-11-16T17:52:09.590+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.w.s.f.support.RouterFunctionMapping  : Mapped to org.springframework.boot.autoconfigure.graphql.servlet.GraphQlWebMvcAutoConfiguration$$Lambda$1042/0x00000260304aac10@42297bdf
2023-11-16T17:52:09.590+02:00 TRACE 20928 --- [nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@343ad840]]] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@1d5d6c9a
2023-11-16T17:52:09.591+02:00 TRACE 20928 --- [nio-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2023-11-16T17:52:09.591+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2023-11-16T17:52:09.592+02:00 TRACE 20928 --- [nio-8080-exec-1] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied

org.springframework.security.access.AccessDeniedException: Access Denied